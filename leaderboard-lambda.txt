import { DynamoDBClient, ScanCommand } from '@aws-sdk/client-dynamodb';
import { unmarshall } from '@aws-sdk/util-dynamodb';

const dbClient = new DynamoDBClient();

export const handler = async (event) => {
    const tableName = event.tableName;
  const params = {
    TableName: tableName
  };

  try {
    const command = new ScanCommand(params);
    const results = [];

    const response = await dbClient.send(command);

    for (const item of response.Items) {
      results.push(unmarshall(item));
    }

    console.log(results);
    
    const res = {
 
      array: results
    };
    

    return res;
  } catch (error) {
    console.error('Error reading items from DynamoDB', error);
    throw error;
  }
};
